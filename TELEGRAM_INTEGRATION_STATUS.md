# üéâ Telegram Bot Integration - –ì–û–¢–û–í–û!

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ:

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ Telethon
```bash
pip install telethon
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–æ –º–æ–¥—É–ª—ñ:
- **telegram_dtek_client.py** - –∫–ª—ñ—î–Ω—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ DTEK –±–æ—Ç–∞–º–∏
  - Async/Sync –≤–µ—Ä—Å—ñ—ó
  - –ö–µ—à—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (2 –≥–æ–¥–∏–Ω–∏)
  - –ü–∞—Ä—Å–∏–Ω–≥ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –±–æ—Ç—ñ–≤
  - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ @DTEKKyivBot, @DTEKDniproBot, @DTEKOdesaBot

- **setup_telegram.py** - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä—à–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
  - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
  - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É —Å–µ—Å—ñ—ó
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –±–æ—Ç—ñ–≤

### 3. –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ blackout_api.py:
- **–ö–∞—Å–∫–∞–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞** –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö:
  ```
  1. YASNO API (–ö–∏—ó–≤, –î–Ω—ñ–ø—Ä–æ) ‚Üí —à–≤–∏–¥–∫–æ, —Ä–µ–∞–ª-—Ç–∞–π–º ‚úÖ
  2. Telegram Bot (–≤—Å—ñ —ñ–Ω—à—ñ –º—ñ—Å—Ç–∞) ‚Üí –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ –î–¢–ï–ö ü§ñ
  3. Fallback schedules ‚Üí —è–∫—â–æ –≤—Å–µ —ñ–Ω—à–µ –Ω–µ –ø—Ä–∞—Ü—é—î üìä
  ```

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—è** —è–∫—â–æ —î credentials
- **–ö–µ—à—É–≤–∞–Ω–Ω—è** 2 –≥–æ–¥–∏–Ω–∏ –¥–ª—è Telegram (–¥–æ–≤—à–µ –Ω—ñ–∂ YASNO –±–æ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ)
- **Graceful degradation** - —è–∫—â–æ –±–æ—Ç –Ω–µ –ø—Ä–∞—Ü—é—î, fallback

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:
- **TELEGRAM_SETUP_GUIDE.md** - –ø–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:
  - –Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ API –∫–ª—é—á—ñ
  - –ü–æ–∫—Ä–æ–∫–æ–≤–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
  - Deployment –Ω–∞ Render
  - Troubleshooting

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:

### –õ–æ–∫–∞–ª—å–Ω–æ:

```bash
# 1. –û—Ç—Ä–∏–º–∞–π—Ç–µ API credentials –Ω–∞ https://my.telegram.org/apps

# 2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ
export TELEGRAM_API_ID='–≤–∞—à_api_id'
export TELEGRAM_API_HASH='–≤–∞—à_api_hash'

# 3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ)
python3 setup_telegram.py
# –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É ‚Üí –∫–æ–¥ –∑ Telegram

# 4. –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä app.py –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Telegram Bot
python3 app.py
```

### –ù–∞ Render:

```bash
# 1. –î–æ–¥–∞–π—Ç–µ Environment Variables:
TELEGRAM_API_ID = –≤–∞—à_id
TELEGRAM_API_HASH = –≤–∞—à_hash

# 2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ñ–∞–π–ª —Å–µ—Å—ñ—ó:
# - –ß–µ—Ä–µ–∑ git: git add dtek_session.session -f
# - –ê–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —á–µ—Ä–µ–∑ Render Shell: python3 setup_telegram.py

# 3. Deploy!
```

## üìä –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

```bash
# –¢–µ—Å—Ç Telegram –∫–ª—ñ—î–Ω—Ç–∞
python3 telegram_dtek_client.py

# –¢–µ—Å—Ç —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó
python3 -c "
from blackout_api import BlackoutAPIClient
client = BlackoutAPIClient()
print(f'Telegram: {\"‚úÖ\" if client.telegram_client else \"‚ùå\"}')
"
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–ë–ï–ó Telegram credentials:**
- –ö–∏—ó–≤, –î–Ω—ñ–ø—Ä–æ ‚Üí YASNO API ‚úÖ
- –Ü–Ω—à—ñ –º—ñ—Å—Ç–∞ ‚Üí Fallback –≥—Ä–∞—Ñ—ñ–∫–∏ üìä

**–ó Telegram credentials:**
- –ö–∏—ó–≤, –î–Ω—ñ–ø—Ä–æ ‚Üí YASNO API ‚úÖ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç)
- –û–¥–µ—Å–∞ ‚Üí Telegram Bot ü§ñ
- –•–∞—Ä–∫—ñ–≤ ‚Üí Telegram Bot ü§ñ  
- –Ü–Ω—à—ñ –º—ñ—Å—Ç–∞ ‚Üí Telegram Bot ü§ñ (—è–∫—â–æ —î –±–æ—Ç)
- Fallback ‚Üí —è–∫—â–æ –±–æ—Ç –Ω–µ –ø—Ä–∞—Ü—é—î üìä

## üí° –ü–µ—Ä–µ–≤–∞–≥–∏:

1. **–û—Ñ—ñ—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ** –≤—ñ–¥ –î–¢–ï–ö –±–æ—Ç—ñ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–æ–∫—Ä–∏—Ç—Ç—è** –≤—Å—ñ—Ö —Ä–µ–≥—ñ–æ–Ω—ñ–≤ –£–∫—Ä–∞—ó–Ω–∏
3. **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å** - fallback –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î
4. **–ö–µ—à—É–≤–∞–Ω–Ω—è** - –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –±–æ—Ç—ñ–≤
5. **–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ** - –ø—Ä–∞—Ü—é—î —ñ –±–µ–∑ Telegram

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

### –ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –∫–µ—à—É–≤–∞–Ω–Ω—è:

```python
# blackout_api.py
_telegram_cache = {
    'ttl': 7200  # 2 –≥–æ–¥–∏–Ω–∏ ‚Üí –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞ —ñ–Ω—à–µ
}
```

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –±–æ—Ç–∏:

```python
# telegram_dtek_client.py
DTEK_BOTS = {
    '—Ö–∞—Ä–∫—ñ–≤': 'DTEKKharkivBot',  # –¥–æ–¥–∞—Ç–∏
    '–ª—å–≤—ñ–≤': 'DTEKLvivBot',       # –¥–æ–¥–∞—Ç–∏
}
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∑ Telegram integration:
- ~80% –∑–∞–ø–∏—Ç—ñ–≤ - –∑ –∫–µ—à—É
- ~15% –∑–∞–ø–∏—Ç—ñ–≤ - YASNO API
- ~5% –∑–∞–ø–∏—Ç—ñ–≤ - Telegram Bot
- 0% –∑–∞–ø–∏—Ç—ñ–≤ - —á–∏—Å—Ç–∏–π fallback

## üîê –ë–µ–∑–ø–µ–∫–∞:

‚úÖ dtek_session.session –≤ .gitignore
‚úÖ TELEGRAM_API_HASH —Ç—ñ–ª—å–∫–∏ –≤ Environment Variables
‚úÖ –°–µ—Å—ñ—è –∂–∏–≤–µ ~1 —Ä—ñ–∫, –ø–æ—Ç—ñ–º regenerate

## üìù –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

1. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≥–æ—Ç–æ–≤–∞
2. ‚è≥ –û—Ç—Ä–∏–º–∞–π—Ç–µ Telegram API credentials
3. ‚è≥ –ó–∞–ø—É—Å—Ç—ñ—Ç—å setup_telegram.py
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
5. ‚è≥ Deploy –Ω–∞ Render

–ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è! üéâ
