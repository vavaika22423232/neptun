#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —à–∞—Ö–µ–¥–æ–≤ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏–∫–æ–Ω–æ–∫
"""

# –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
test_messages = [
    "üá∫üá¶ –ß–µ—Ä–Ω—ñ–≥—ñ–≤ ‚Üê–ø—ñ–≤–¥–Ω—è ‚Äî 1—Ö –ë–ø–õ–ê –∫—É—Ä—Å–æ–º –Ω–∞ –ì–æ–Ω—á–∞—Ä–æ—Å—å–∫–µ",
    "üá∫üá¶ –°–ª–∞–≤—É—Ç–∏—á ‚Üê—Å—Ö–æ–¥—É ‚Äî 2—Ö –ë–ø–õ–ê –∫—É—Ä—Å–æ–º –Ω–∞ –ù—ñ–∂–∏–Ω", 
    "üá∫üá¶ –ö–∏—ó–≤ ‚Üê–∑–∞—Ö–æ–¥—É ‚Äî 1—Ö –ë–ø–õ–ê",
    "üá∫üá¶ –°—É–º–∏ ‚Üê–ø—ñ–≤–Ω–æ—á—ñ ‚Äî –ë–ø–õ–ê –∫—É—Ä—Å–æ–º –Ω–∞ –û—Ö—Ç–∏—Ä–∫—É",
    "üá∫üá¶ –•–∞—Ä–∫—ñ–≤ ‚Üê–ø—ñ–≤–¥-—Å—Ö–æ–¥—É ‚Äî 3—Ö –ë–ø–õ–ê",
    "üá∫üá¶ –ü–æ–ª—Ç–∞–≤–∞ ‚Üê–ø—ñ–≤–Ω-–∑–∞—Ö–æ–¥—É ‚Äî –ë–ø–õ–ê –∫—É—Ä—Å–æ–º –Ω–∞ –ö—Ä–µ–º–µ–Ω—á—É–∫"
]

def get_rotation_angle(direction):
    """
    –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –∏–∫–æ–Ω–∫–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—Ç–∫—É–¥–∞ –ø—Ä–∏–ª–µ—Ç–∞–µ—Ç —É–≥—Ä–æ–∑–∞
    –õ–æ–≥–∏–∫–∞: –µ—Å–ª–∏ —É–≥—Ä–æ–∑–∞ ‚Üê–ø—ñ–≤–¥–Ω—è, —Ç–æ –æ–Ω–∞ –ª–µ—Ç–∏—Ç –Ω–∞ —Å–µ–≤–µ—Ä (90¬∞)
    """
    if not direction:
        return 0
    
    dir_lower = direction.lower()
    
    # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (8 —Å—Ç–æ—Ä–æ–Ω —Å–≤–µ—Ç–∞) - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–Ω–∞—á–∞–ª–∞
    if '–ø—ñ–≤–¥' in dir_lower and ('—Å—Ö–æ–¥' in dir_lower or '—Å—Ö' in dir_lower):
        return 135  # —Å —é–≥–æ-–≤–æ—Å—Ç–æ–∫–∞ ‚Üí –Ω–∞ —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥
    if '–ø—ñ–≤–¥' in dir_lower and ('–∑–∞—Ö' in dir_lower or '–∑—Ö' in dir_lower):
        return 45   # —Å —é–≥–æ-–∑–∞–ø–∞–¥–∞ ‚Üí –Ω–∞ —Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ–∫  
    if ('–ø—ñ–≤–Ω—ñ—á' in dir_lower or '–ø—ñ–≤–Ω' in dir_lower) and ('—Å—Ö–æ–¥' in dir_lower or '—Å—Ö' in dir_lower):
        return 225  # —Å —Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ–∫–∞ ‚Üí –Ω–∞ —é–≥–æ-–∑–∞–ø–∞–¥
    if ('–ø—ñ–≤–Ω—ñ—á' in dir_lower or '–ø—ñ–≤–Ω' in dir_lower) and ('–∑–∞—Ö' in dir_lower or '–∑—Ö' in dir_lower):
        return 315  # —Å —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥–∞ ‚Üí –Ω–∞ —é–≥–æ-–≤–æ—Å—Ç–æ–∫
    
    # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (4 —Å—Ç–æ—Ä–æ–Ω—ã —Å–≤–µ—Ç–∞)
    if '–ø—ñ–≤–¥' in dir_lower:
        return 90   # —Å —é–≥–∞ ‚Üí –Ω–∞ —Å–µ–≤–µ—Ä
    if '–ø—ñ–≤–Ω—ñ—á' in dir_lower or '–ø—ñ–≤–Ω' in dir_lower:
        return 270  # —Å —Å–µ–≤–µ—Ä–∞ ‚Üí –Ω–∞ —é–≥  
    if '—Å—Ö–æ–¥' in dir_lower or '—Å—Ö' in dir_lower:
        return 180  # —Å –≤–æ—Å—Ç–æ–∫–∞ ‚Üí –Ω–∞ –∑–∞–ø–∞–¥
    if '–∑–∞—Ö' in dir_lower or '–∑–∞—Ö–æ–¥' in dir_lower:
        return 0    # —Å –∑–∞–ø–∞–¥–∞ ‚Üí –Ω–∞ –≤–æ—Å—Ç–æ–∫
    
    return 0

def parse_direction_from_message(message):
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Å–∏–º–≤–æ–ª—É ‚Üê"""
    if '‚Üê' not in message:
        return None
    
    # –ù–∞—Ö–æ–¥–∏–º —á–∞—Å—Ç—å –ø–æ—Å–ª–µ ‚Üê
    direction_part = message.split('‚Üê')[1]
    
    # –ë–µ—Ä–µ–º —Å–ª–æ–≤–æ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–æ–±–µ–ª–∞ –∏–ª–∏ –∑–Ω–∞–∫–∞
    direction = direction_part.split()[0].split('‚Äî')[0].strip()
    
    return direction

def test_direction_parsing():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ —É–≥–ª–æ–≤ –ø–æ–≤–æ—Ä–æ—Ç–∞"""
    print("üß™ –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —à–∞—Ö–µ–¥–æ–≤\n")
    print("=" * 60)
    
    for i, message in enumerate(test_messages, 1):
        print(f"\n{i}. –°–æ–æ–±—â–µ–Ω–∏–µ: {message}")
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        direction = parse_direction_from_message(message)
        print(f"   –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {direction}")
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞
        angle = get_rotation_angle(direction)
        print(f"   –£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞: {angle}¬∞")
        
        # –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
        arrow_map = {
            0: "‚Üí",      # –≤–æ—Å—Ç–æ–∫
            45: "‚Üó",     # —Å–µ–≤–µ—Ä–æ-–≤–æ—Å—Ç–æ–∫  
            90: "‚Üë",     # —Å–µ–≤–µ—Ä
            135: "‚Üñ",    # —Å–µ–≤–µ—Ä–æ-–∑–∞–ø–∞–¥
            180: "‚Üê",    # –∑–∞–ø–∞–¥
            225: "‚Üô",    # —é–≥–æ-–∑–∞–ø–∞–¥
            270: "‚Üì",    # —é–≥
            315: "‚Üò"     # —é–≥–æ-–≤–æ—Å—Ç–æ–∫
        }
        
        arrow = arrow_map.get(angle, "?")
        print(f"   –í–∏–∑—É–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: {arrow}")
        print(f"   CSS: transform: rotate({angle}deg);")

if __name__ == "__main__":
    test_direction_parsing()
