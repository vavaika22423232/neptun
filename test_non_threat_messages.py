#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from app import process_message

def test_non_threat_messages():
    print("=== –¢–ï–°–¢ –ù–ï–¢–ê–ö–¢–ò–ß–ï–°–ö–ò–• –°–û–û–ë–©–ï–ù–ò–ô ===")
    
    non_threat_messages = [
        # –°–±–æ—Ä —Å—Ä–µ–¥—Å—Ç–≤
        "üëÄ–ù—ñ—á –±—É–¥–µ –≤–∞–∂–∫–æ—é, –∑–∞–ª–∏—à–∞—Ç–∏–º—É—Å—è –∑ –≤–∞–º–∏ –¥—Ä—É–∑—ñ –≤–Ω–æ—á—ñ, –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏–º—É –∑–∞—Ä–∞–¥–∏ –≤–∞—à–æ—ó –±–µ–∑–ø–µ–∫–∏, –ø—ñ–¥—Ç—Ä–∏–º–∞–π—Ç–µ –º–µ–Ω–µ –ø–æ 5-10-15 –≥—Ä–Ω –Ω–∞ –∫–∞–≤—É —Ç–∞ –µ–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏",
        
        # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–µ–∑ —É–≥—Ä–æ–∑—ã
        "–ó–¥—ñ–π—Å–Ω–∏–≤ –ø–æ—Å–∞–¥–∫—É –Ω–∞ –∞–µ—Ä–æ–¥—Ä–æ–º \"–ï–Ω–≥–µ–ª—å—Å-2\"",
        
        # –†–µ–∫–ª–∞–º–∞ –∫–∞–Ω–∞–ª–∞
        "‚úô –ù–∞–ø—Ä—è–º–æ–∫ —Ä–∞–∫–µ—Ç ‚úô\n‚úô–ü—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –∫–∞–Ω–∞–ª‚úô",
        
        # –ü–µ—Ä–µ–¥–∏—Å–ª–æ–∫–∞—Ü–∏—è
        "ü™ø–ü–µ—Ä–µ–¥–∏—Å–ª–æ–∫–∞—Ü—ñ—è –¢—É-160 –∑ –£–∫—Ä–∞—ó–Ω–∫–∏ –Ω–∞ \"–ï–Ω–≥–µ–ª—å—Å-2\"",
        
        # –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        "–ù–∞—Ä–∞–∑—ñ —Ü–µ —î–¥–∏–Ω–∞ —Ñ–∞–∫—Ç–∏—á–Ω–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –±–æ—Ä—Ç—ñ–≤. –í —Ä–∞–∑—ñ –¥–æ–¥–∞—Ç–∫–æ–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó - –±—É–¥—É –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏"
    ]
    
    for i, message in enumerate(non_threat_messages, 1):
        print(f"\n–¢–ï–°–¢ {i}: {message[:50]}...")
        print(f"–ü–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: {message}")
        
        try:
            result = process_message(message, f"non_threat_test_{i}", "2025-09-27 12:00:00", "test")
            
            if result is None or result == []:
                print("‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ")
            else:
                print(f"‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –°–æ–∑–¥–∞–Ω–æ {len(result)} –º–µ—Ç–æ–∫")
                for j, marker in enumerate(result, 1):
                    name = marker.get('place', 'Unknown')
                    coords = f"({marker.get('lat', 'N/A')}, {marker.get('lng', 'N/A')})"
                    print(f"  {j}: {name} - {coords}")
                    
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞: {e}")
        
        print("-" * 60)

if __name__ == "__main__":
    test_non_threat_messages()
