services:
  - type: web
    name: neptun-alerts
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt && python -c "import spacy; print('SpaCy installed')" && python -m spacy download uk_core_news_sm || echo "SpaCy model download failed, continuing without NLP..."
    startCommand: python app.py
    disk:
      name: data
      mountPath: /data
      sizeGB: 1
    envVars:
      - key: TELEGRAM_API_ID
        sync: false
      - key: TELEGRAM_API_HASH
        sync: false
      - key: TELEGRAM_CHANNELS
        value: UkraineAlarmSignal,war_monitor
      - key: GOOGLE_MAPS_KEY
        sync: false
      - key: VISITS_DB
        value: /data/visits.db
      - key: FLASK_ENV
        value: production
      - key: MAX_CONTENT_LENGTH
        value: "1048576"
