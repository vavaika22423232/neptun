#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
sys.path.append('/Users/vladimirmalik/Desktop/render2')

from app import CITY_COORDS

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
potential_conflicts = {
    '—Ç—Ä–æ—Å—Ç—è–Ω–µ—Ü—å': '—Å—É–º—Å—å–∫–∞/–≤—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—ñ',
    '—è–º–ø—ñ–ª—å': '—Å—É–º—Å—å–∫–∞/–≤—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—ñ', 
    '—á–µ—á–µ–ª—å–Ω–∏–∫': '–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–≥–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è',
    '—Ç–µ–ø–ª–∏–∫': '–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–≥–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è',
    '–º–æ–≥–∏–ª—ñ–≤-–ø–æ–¥—ñ–ª—å—Å—å–∫–∏–π': '–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–≥–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è',
    '—Ö–º—ñ–ª—å–Ω–∏–∫': '–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–≥–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è'
}

print("=== –ü–†–û–í–ï–†–ö–ê –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–´–• –ö–û–ù–§–õ–ò–ö–¢–û–í –ö–û–û–†–î–ò–ù–ê–¢ ===")
print()

for city, note in potential_conflicts.items():
    if city in CITY_COORDS:
        coords = CITY_COORDS[city]
        print(f"üîç {city:25}: {coords} ({note})")
    else:
        print(f"‚ùå {city:25}: –ù–ï –ù–ê–ô–î–ï–ù")

print()
print("=== –ê–ù–ê–õ–ò–ó –ö–û–û–†–î–ò–ù–ê–¢ ===")

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–ª—è –í–∏–Ω–Ω–∏—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏
# –í–∏–Ω–Ω–∏—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å: –ø—Ä–∏–º–µ—Ä–Ω–æ 48.0-50.2 —à–∏—Ä–æ—Ç–∞, 27.5-30.0 –¥–æ–ª–≥–æ—Ç–∞
vinnytsia_bounds = {
    'lat_min': 48.0,
    'lat_max': 50.2,
    'lng_min': 27.5,
    'lng_max': 30.0
}

vinnytsia_related = []
out_of_bounds = []

for city, coords in CITY_COORDS.items():
    # –ò—â–µ–º –≥–æ—Ä–æ–¥–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –í–∏–Ω–Ω–∏—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç—å—é
    if any(keyword in city for keyword in ['–≤—ñ–Ω–Ω–∏—Ü', '–∫–æ–∑—è—Ç–∏–Ω', '—Ö–º—ñ–ª—å–Ω–∏–∫', '–ª–∞–¥–∏–∂–∏–Ω', '–≥–∞–π—Å–∏–Ω', 
                                          '–∂–º–µ—Ä–∏–Ω–∫', '—Ç—É–ª—å—á–∏–Ω', '—à–∞—Ä–≥–æ—Ä–æ–¥', '—è–º–ø—ñ–ª—å', '–±–∞—Ä', 
                                          '—Ç–µ–ø–ª–∏–∫', '–±—Ä–∞—ó–ª—ñ–≤', '–Ω–µ–º–∏—Ä', '–æ—Ä–∞—Ç—ñ–≤', '–ª—ñ—Ç–∏–Ω']):
        vinnytsia_related.append((city, coords))
        
        lat, lng = coords
        if not (vinnytsia_bounds['lat_min'] <= lat <= vinnytsia_bounds['lat_max'] and 
                vinnytsia_bounds['lng_min'] <= lng <= vinnytsia_bounds['lng_max']):
            out_of_bounds.append((city, coords))

print(f"–ù–∞–π–¥–µ–Ω–æ –≥–æ—Ä–æ–¥–æ–≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –í–∏–Ω–Ω–∏—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç—å—é: {len(vinnytsia_related)}")

if out_of_bounds:
    print()
    print("‚ö†Ô∏è  –ì–û–†–û–î–ê –ó–ê –ü–†–ï–î–ï–õ–ê–ú–ò –û–ñ–ò–î–ê–ï–ú–´–• –ì–†–ê–ù–ò–¶ –í–ò–ù–ù–ò–¶–ö–û–ô –û–ë–õ–ê–°–¢–ò:")
    for city, coords in out_of_bounds:
        lat, lng = coords
        print(f"   {city:25}: {coords}")
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º, –∫ –∫–∞–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –º–æ–∂–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è
        if lat > 50.2:
            print(f"       ‚Üí –í–æ–∑–º–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —Å–µ–≤–µ—Ä–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º (–ñ–∏—Ç–æ–º–∏—Ä—Å–∫–∞—è, –ö–∏–µ–≤—Å–∫–∞—è)")
        elif lat < 48.0:
            print(f"       ‚Üí –í–æ–∑–º–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ —é–∂–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º (–û–¥–µ—Å—Å–∫–∞—è, –•–µ—Ä—Å–æ–Ω—Å–∫–∞—è)")
        if lng > 30.0:
            print(f"       ‚Üí –í–æ–∑–º–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≤–æ—Å—Ç–æ—á–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º")
        elif lng < 27.5:
            print(f"       ‚Üí –í–æ–∑–º–æ–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∑–∞–ø–∞–¥–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º")
else:
    print("‚úÖ –í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–∂–∏–¥–∞–µ–º—ã—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö –í–∏–Ω–Ω–∏—Ü–∫–æ–π –æ–±–ª–∞—Å—Ç–∏")

print()
print("=== –£–°–ü–ï–®–ù–´–ï –î–û–ë–ê–í–õ–ï–ù–ò–Ø ===")
newly_added = [
    '–∫–æ–∑—è—Ç–∏–Ω', '—Ö–º—ñ–ª—å–Ω–∏–∫', '–ª–∞–¥–∏–∂–∏–Ω', '–º–æ–≥–∏–ª—ñ–≤-–ø–æ–¥—ñ–ª—å—Å—å–∫–∏–π', '–±–∞—Ä', '–≥–∞–π—Å–∏–Ω', 
    '–∂–º–µ—Ä–∏–Ω–∫–∞', '—ñ–ª–ª—ñ–Ω—Ü—ñ', '–∫–∞–ª–∏–Ω—ñ–≤–∫–∞', '–∫—Ä–∏–∂–æ–ø—ñ–ª—å', '–ª–∏–ø–æ–≤–µ—Ü—å', '–ª—ñ—Ç–∏–Ω',
    '–º—É—Ä–æ–≤–∞–Ω—ñ –∫—É—Ä–∏–ª—ñ–≤—Ü—ñ', '–Ω–µ–º–∏—Ä—ñ–≤', '–ø—ñ—â–∞–Ω–∫–∞', '—Ç–æ–º–∞—à–ø—ñ–ª—å', '—Ç–∏–≤—Ä—ñ–≤',
    '–±—Ä–∞—ó–ª—ñ–≤', '–≤–∞–ø–Ω—è—Ä–∫–∞', '–≥–Ω—ñ–≤–∞–Ω—å', '–¥–∞—à—ñ–≤', '–¥–µ—Ä–∞–∂–Ω—è', '–¥–∂—É–ª–∏–Ω–∫–∞',
    '–º—É—Ä–∞—Ñ–∞', '–æ—Ö–º–∞—Ç—ñ–≤', '–ø–µ—á–µ—Ä–∞', '—Å—Ç–∞–Ω—ñ—Å–ª–∞–≤—á–∏–∫', '—Å—Ç—Ä–∏–∂–∞–≤–∫–∞', '—á–æ—Ä–Ω–∏–π –æ—Å—Ç—Ä—ñ–≤'
]

found_new = 0
for city in newly_added:
    if city in CITY_COORDS:
        found_new += 1

print(f"–£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö –≥–æ—Ä–æ–¥–æ–≤: {found_new}/{len(newly_added)}")
print("üéâ –í–∏–Ω–Ω–∏—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤!")
