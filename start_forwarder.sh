#!/bin/bash
# –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç Channel Forwarder Bot

echo "üöÄ Channel Forwarder - –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç"
echo "======================================"
echo ""

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Python
if ! command -v python3 &> /dev/null; then
    echo "‚ùå Python 3 –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!"
    echo "–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Python 3: https://www.python.org/downloads/"
    exit 1
fi

echo "‚úÖ Python –∑–Ω–∞–π–¥–µ–Ω–æ: $(python3 --version)"
echo ""

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
echo "üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π..."
python3 -m pip install --upgrade pip
python3 -m pip install -r requirements_forwarder.txt

if [ $? -ne 0 ]; then
    echo "‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π!"
    exit 1
fi

echo ""
echo "‚úÖ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!"
echo ""

# –í–∏–±—ñ—Ä –≤–µ—Ä—Å—ñ—ó
echo "–í–∏–±–µ—Ä—ñ—Ç—å –≤–µ—Ä—Å—ñ—é –±–æ—Ç–∞:"
echo ""
echo "1) Telethon (–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û)"
echo "   ‚úÖ –ü—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–∏–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏"
echo "   ‚úÖ –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º"
echo "   ‚ö†Ô∏è –ü–æ—Ç—Ä—ñ–±–Ω–∞ SMS –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É"
echo ""
echo "2) Bot API (–æ–±–º–µ–∂–µ–Ω–∏–π)"
echo "   ‚úÖ –ü—Ä–æ—Å—Ç—ñ—à–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏"
echo "   ‚ùå –ü–æ—Ç—Ä—ñ–±–Ω–æ –±—É—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤—Å—ñ—Ö –∫–∞–Ω–∞–ª—ñ–≤"
echo ""
read -p "–í–∞—à –≤–∏–±—ñ—Ä (1 –∞–±–æ 2): " choice

echo ""

if [ "$choice" = "1" ]; then
    echo "üöÄ –ó–∞–ø—É—Å–∫ Telethon –≤–µ—Ä—Å—ñ—ó..."
    echo ""
    echo "‚ö†Ô∏è –£–í–ê–ì–ê: –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ:"
    echo "   1. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –∑ SMS"
    echo "   2. –ú–æ–∂–ª–∏–≤–æ –≤–≤–µ—Å—Ç–∏ 2FA –ø–∞—Ä–æ–ª—å"
    echo ""
    echo "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è..."
    read
    
    python3 channel_forwarder.py
    
elif [ "$choice" = "2" ]; then
    echo "üöÄ –ó–∞–ø—É—Å–∫ Bot API –≤–µ—Ä—Å—ñ—ó..."
    echo ""
    echo "‚ö†Ô∏è –£–í–ê–ì–ê: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ:"
    echo "   1. –ë–æ—Ç –¥–æ–¥–∞–Ω–æ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –≤ –í–°–Ü –∫–∞–Ω–∞–ª–∏"
    echo "   2. ID –∫–∞–Ω–∞–ª—ñ–≤ –¥–æ–¥–∞–Ω—ñ –≤ SOURCE_CHANNEL_IDS"
    echo ""
    echo "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter –¥–ª—è –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è..."
    read
    
    python3 channel_forwarder_bot.py
    
else
    echo "‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –≤–∏–±—ñ—Ä!"
    exit 1
fi
