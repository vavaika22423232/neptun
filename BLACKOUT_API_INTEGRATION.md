# –Ü–ù–¢–ï–ì–†–ê–¶–Ü–Ø –ó API –ï–ù–ï–†–ì–û–ü–†–û–í–ê–ô–î–ï–†–Ü–í

## –û–≥–ª—è–¥

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î **–±—É–¥—å-—è–∫—ñ –º—ñ—Å—Ç–∞, —Å–µ–ª–∞ —Ç–∞ –≤—É–ª–∏—Ü—ñ –£–∫—Ä–∞—ó–Ω–∏** —á–µ—Ä–µ–∑ –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ API –µ–Ω–µ—Ä–≥–æ–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤.

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1. –ì–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **Nominatim (OpenStreetMap)** –¥–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å
- –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤—Å—ñ –Ω–∞—Å–µ–ª–µ–Ω—ñ –ø—É–Ω–∫—Ç–∏ –£–∫—Ä–∞—ó–Ω–∏
- –í–∏–∑–Ω–∞—á–∞—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –ø–æ–≤–Ω—É –∞–¥—Ä–µ—Å—É

### 2. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –µ–Ω–µ—Ä–≥–æ–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∑–∞ –º—ñ—Å—Ç–æ–º:
- **–î–¢–ï–ö –ö–∏—ó–≤—Å—å–∫—ñ –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ** - –ö–∏—ó–≤, –ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
- **–î–¢–ï–ö –û–¥–µ—Å—å–∫—ñ –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ** - –û–¥–µ—Å–∞, –û–¥–µ—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å  
- **–î–¢–ï–ö –î–Ω—ñ–ø—Ä–æ–≤—Å—å–∫—ñ –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ** - –î–Ω—ñ–ø—Ä–æ, –î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
- **–î–¢–ï–ö –î–æ–Ω–µ—Ü—å–∫—ñ –µ–ª–µ–∫—Ç—Ä–æ–º–µ—Ä–µ–∂—ñ** - –î–æ–Ω–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
- **–î–¢–ï–ö –°—Ö—ñ–¥–µ–Ω–µ—Ä–≥–æ** - –•–∞—Ä–∫—ñ–≤, –•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å
- **YASNO** - –ö–∏—ó–≤ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä)
- **–£–∫—Ä–µ–Ω–µ—Ä–≥–æ** - –∑–∞–≥–∞–ª—å–Ω–æ—É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä (fallback)
- **–†–µ–≥—ñ–æ–Ω–∞–ª—å–Ω—ñ –æ–±–ª–µ–Ω–µ—Ä–≥–æ** - —ñ–Ω—à—ñ –æ–±–ª–∞—Å—Ç—ñ

### 3. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

#### –ü–æ—Ç–æ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è (DEMO)
```python
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≥–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è + –ª–æ–≥—ñ–∫—É –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–≥–∏
result = blackout_client.get_schedule_for_address(city, street, building)
```

–ü–æ–≤–µ—Ä—Ç–∞—î:
- ‚úÖ –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—É –∞–¥—Ä–µ—Å—É (—á–µ—Ä–µ–∑ OpenStreetMap)
- ‚úÖ –ü—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –µ–Ω–µ—Ä–≥—ñ—ó
- ‚úÖ –ß–µ—Ä–≥—É –≤—ñ–¥–∫–ª—é—á–µ–Ω—å (1-3)
- ‚úÖ –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ 24 –≥–æ–¥–∏–Ω–∏
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∞–¥—Ä–µ—Å–∏

#### –î–ª—è –ø–æ–≤–Ω–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ:

## –†–ï–ê–õ–¨–ù–ê –Ü–ù–¢–ï–ì–†–ê–¶–Ü–Ø –ó DTEK

### API –î–¢–ï–ö
–î–¢–ï–ö –º–∞—î –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ –¥–ª—è –ø–æ—à—É–∫—É –≥—Ä–∞—Ñ—ñ–∫—ñ–≤:
- https://www.dtek-krem.com.ua/ua/shutdowns (–ö–∏—ó–≤)
- https://www.dtek-oem.com.ua/ua/shutdowns (–û–¥–µ—Å–∞)
- https://www.dtek-dnem.com.ua/ua/shutdowns (–î–Ω—ñ–ø—Ä–æ)

**–ü–æ—Ç—Ä—ñ–±–Ω–æ:**
1. Reverse-engineering —ó—Ö API –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Selenium/Playwright
2. –û—Ç—Ä–∏–º–∞—Ç–∏ endpoint –¥–ª—è –ø–æ—à—É–∫—É –∞–¥—Ä–µ—Å
3. –û—Ç—Ä–∏–º–∞—Ç–∏ endpoint –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –ø–æ –∞–¥—Ä–µ—Å—ñ

**–ü—Ä–∏–∫–ª–∞–¥ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:**
```python
def fetch_dtek_schedule(provider_id: str, address: str):
    # –ö—Ä–æ–∫ 1: –ü–æ—à—É–∫ –∞–¥—Ä–µ—Å–∏
    search_url = f"{provider_api}/api/search-address"
    response = session.post(search_url, json={
        'address': address,
        'city': city
    })
    address_data = response.json()
    
    # –ö—Ä–æ–∫ 2: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É
    schedule_url = f"{provider_api}/api/get-schedule"
    response = session.post(schedule_url, json={
        'address_id': address_data['id'],
        'queue': address_data['queue']
    })
    
    return response.json()
```

### YASNO API

YASNO –º–∞—î –ø—É–±–ª—ñ—á–Ω–∏–π API:
```
GET https://api.yasno.com.ua/api/v1/pages/home/schedule-turn-off-electricity
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö:**
- –ì—Ä—É–ø–∏: 1-6
- –§–æ—Ä–º–∞—Ç: JSON –∑ —Ä–æ–∑–∫–ª–∞–¥–æ–º –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å
- –ü–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á (–º–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —á–µ—Ä–µ–∑ devtools)

**–ü—Ä–∏–∫–ª–∞–¥ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:**
```python
def fetch_yasno_schedule():
    url = "https://api.yasno.com.ua/api/v1/pages/home/schedule-turn-off-electricity"
    headers = {
        'Authorization': 'Bearer YOUR_API_KEY',
        'User-Agent': 'Mozilla/5.0...'
    }
    response = session.get(url, headers=headers)
    return response.json()
```

### –£–∫—Ä–µ–Ω–µ—Ä–≥–æ

–£–∫—Ä–µ–Ω–µ—Ä–≥–æ –ø—É–±–ª—ñ–∫—É—î –≥—Ä–∞—Ñ—ñ–∫–∏ –Ω–∞ —Å–∞–π—Ç—ñ:
- https://www.oe.if.ua/

–ú–æ–∂–Ω–∞ –ø–∞—Ä—Å–∏—Ç–∏ HTML –∞–±–æ —à—É–∫–∞—Ç–∏ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ API endpoints.

## –†–ï–ê–õ–Ü–ó–û–í–ê–ù–Ü –ú–û–ñ–õ–ò–í–û–°–¢–Ü

### ‚úÖ –ü—Ä–∞—Ü—é—î –∑–∞—Ä–∞–∑:
1. **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ø–æ—à—É–∫ –∞–¥—Ä–µ—Å** - —á–µ—Ä–µ–∑ OpenStreetMap
2. **–í—Å—ñ –º—ñ—Å—Ç–∞ –£–∫—Ä–∞—ó–Ω–∏** - –±—É–¥—å-—è–∫—ñ –Ω–∞—Å–µ–ª–µ–Ω—ñ –ø—É–Ω–∫—Ç–∏
3. **–ì–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è** - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ + –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –∞–¥—Ä–µ—Å–∏
4. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ —Ä–µ–≥—ñ–æ–Ω—É
5. **–î–µ–º–æ-–≥—Ä–∞—Ñ—ñ–∫–∏** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —è–∫ —É –î–¢–ï–ö (3 —á–µ—Ä–≥–∏)

### üîÑ –ü–æ—Ç—Ä–µ–±—É—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó:
1. **–†–µ–∞–ª—å–Ω—ñ API –∫–ª—é—á—ñ** –≤—ñ–¥ –î–¢–ï–ö, YASNO
2. **–ü–∞—Ä—Å–∏–Ω–≥** –≤–µ–±-—Å–∞–π—Ç—ñ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤ (—è–∫—â–æ –Ω–µ–º–∞—î API)
3. **–ë–∞–∑–∞ –∞–¥—Ä–µ—Å –∑ —á–µ—Ä–≥–∞–º–∏** - –ø–æ—Ç—Ä—ñ–±–Ω–∞ –≤—ñ–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤
4. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö** - –∫–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ refresh

## –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø

### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É:
```
GET /api/get_schedule?city=–°—É–º–∏&street=–°–æ–±–æ—Ä–Ω–∞&building=15
```

### –í—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
    "address": "–°—É–º–∏, –≤—É–ª. –°–æ–±–æ—Ä–Ω–∞, 15",
    "city": "–°—É–º–∏",
    "oblast": "–°—É–º—Å—å–∫–∞",
    "provider": "–°—É–º–∏–æ–±–ª–µ–Ω–µ—Ä–≥–æ",
    "group": 2,
    "schedule": [
        {
            "time": "00:00 - 04:00",
            "label": "–ï–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è",
            "status": "normal"
        },
        {
            "time": "12:00 - 16:00",
            "label": "–ê–∫—Ç–∏–≤–Ω–µ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è",
            "status": "active"
        }
    ],
    "coordinates": {
        "lat": 50.9077,
        "lon": 34.7981
    },
    "found": true
}
```

## –ù–ê–°–¢–£–ü–ù–Ü –ö–†–û–ö–ò

### 1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è API –¥–æ—Å—Ç—É–ø—É
- –ó–≤'—è–∑–∞—Ç–∏—Å—è –∑ –î–¢–ï–ö –¥–ª—è API –∫–ª—é—á—ñ–≤
- –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –≤ YASNO API
- –î–æ—Å–ª—ñ–¥–∏—Ç–∏ endpoints —ñ–Ω—à–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤

### 2. –ü–∞—Ä—Å–∏–Ω–≥ (—è–∫—â–æ –Ω–µ–º–∞—î API)
```bash
pip install selenium playwright beautifulsoup4
```

### 3. –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –∞–¥—Ä–µ—Å
- –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∞–¥—Ä–µ—Å–∏ –∑ –≤—ñ–¥–∫—Ä–∏—Ç–∏—Ö –¥–∞–Ω–∏—Ö
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

### 4. –ö–µ—à—É–≤–∞–Ω–Ω—è
- Redis –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–∞–∑ –Ω–∞ –≥–æ–¥–∏–Ω—É
- TTL –¥–ª—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –¥–∞–Ω–∏—Ö

## –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –§–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É:
- `blackout_api.py` - –ö–ª—ñ—î–Ω—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ API
- `app.py` - Flask endpoints
- `templates/blackouts.html` - UI
- `requirements.txt` - –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```
geopy==2.4.1  # –ì–µ–æ–∫–æ–¥—É–≤–∞–Ω–Ω—è
requests==2.32.3  # HTTP –∑–∞–ø–∏—Ç–∏
```

### –õ–æ–≥—É–≤–∞–Ω–Ω—è:
```python
import logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)
```

## –ö–û–ù–¢–ê–ö–¢–ò –î–õ–Ø –Ü–ù–¢–ï–ì–†–ê–¶–Ü–á

- **–î–¢–ï–ö**: https://www.dtek.com/
- **YASNO**: https://yasno.com.ua/
- **–£–∫—Ä–µ–Ω–µ—Ä–≥–æ**: https://ua.energy/

## –õ–Ü–¶–ï–ù–ó–Ü–Ø –¢–ê –î–ê–ù–Ü

–î–∞–Ω—ñ –ø—Ä–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —î –ø—É–±–ª—ñ—á–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –∑–≥—ñ–¥–Ω–æ –∑ –∑–∞–∫–æ–Ω–æ–¥–∞–≤—Å—Ç–≤–æ–º –£–∫—Ä–∞—ó–Ω–∏. 
–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –æ—Å–≤—ñ—Ç–Ω—ñ—Ö —Ç–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏—Ö —Ü—ñ–ª—è—Ö.
