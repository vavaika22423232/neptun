#!/usr/bin/env python3
import re

text = '''БпЛА на Велика Димерка'''

# Текущий паттерн
pattern1 = r"бпла\s+на\s+([A-Za-zА-Яа-яЇїІіЄєҐґ\-\'ʼ\`\s/]{3,40}?)(?=\s|$|[,\.\!\?;])"
result1 = re.findall(pattern1, text.lower())
print(f"Текущий паттерн: {result1}")

# Улучшенный паттерн - ищем до конца строки или знаков препинания (но не обычных пробелов)
pattern2 = r"бпла\s+на\s+([A-Za-zА-Яа-яЏїІіЄєҐґ\-\'ʼ\`\s/]+?)(?=\s*$|[,\.\!\?;:]|\s+[A-ZА-Я])"
result2 = re.findall(pattern2, text.lower())
print(f"Улучшенный паттерн: {result2}")

# Простейший - ищем до конца строки или знаков препинания
pattern3 = r"бпла\s+на\s+([^,\.\!\?;:\n]+)"
result3 = re.findall(pattern3, text.lower())
print(f"Простейший паттерн: {result3}")

# Тестируем на полном тексте
full_text = '''Сумщина:
БпЛА на Кролевец
БпЛА на Конотоп

Чернігівщина:
БпЛА на Чернігів

Київщина:
БпЛА на Житомирщину з півночі  
БпЛА на Вишгород/Петрівці
БпЛА на Велика Димерка

✙ Напрямок ракет ✙
✙Підтримати канал✙'''

print("\n--- Тестирование на полном тексте ---")
for i, pat in enumerate([pattern1, pattern2, pattern3], 1):
    results = re.findall(pat, full_text.lower())
    print(f"Паттерн {i}: {results}")
